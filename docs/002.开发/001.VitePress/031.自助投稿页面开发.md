---
title: è‡ªåŠ©æŠ•ç¨¿é¡µé¢å¼€å‘
date: 2026-02-23 14:54:15
permalink: /vitepress/031
categories:
  - æ•™ç¨‹
tags:
  - VitePress
description: è¯¦ç»†ä»‹ç»å¦‚ä½•å¼€å‘ä¸€ä¸ªé«˜æ€§èƒ½çš„è‡ªåŠ©æŠ•ç¨¿è¡¨å•ç»„ä»¶SubmissionFormï¼Œç”¨äºåœ¨VitePressä¸­æ”¶é›†ç”¨æˆ·æŠ•ç¨¿èµ„æºã€‚æ¶µç›–ç»„ä»¶éœ€æ±‚åˆ†æã€Vue3+TypeScriptä»£ç å®ç°ã€ç»„ä»¶æ³¨å†Œæ–¹æ³•ã€åŠ¨æ€Markdownç”Ÿæˆã€å¤´åƒè‡ªåŠ¨åŒ¹é…ã€å›¾ç‰‡ä¸ä¸‹è½½é“¾æ¥åŠ¨æ€å¢åˆ ã€è¡¨å•éªŒè¯ç­‰æ ¸å¿ƒåŠŸèƒ½çš„å®Œæ•´å¼€å‘æµç¨‹ã€‚
author:
  name: æˆ‘å°±æ˜¯åŒçµ
  link: https://space.bilibili.com/1323019347
---

# è‡ªåŠ©æŠ•ç¨¿é¡µé¢å¼€å‘

## ç»„ä»¶éœ€æ±‚

ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·è‡ªåŠ©æŠ•ç¨¿èµ„æºåˆ°èµ„æºä¸‹è½½é¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦å¼€å‘ä¸€ä¸ªæŠ•ç¨¿è¡¨å•ç»„ä»¶ï¼Œæ»¡è¶³ä»¥ä¸‹éœ€æ±‚ï¼š

- æ”¶é›†ä½œå“ä¿¡æ¯ï¼ˆä½œå“åã€èµ„æºç±»å‹ï¼‰
- æ”¯æŒå¯é€‰çš„Bç«™è§†é¢‘åµŒå…¥
- æ”¶é›†ä½œè€…ä¿¡æ¯ï¼ˆä½œè€…åã€æ¸¸æˆIDã€ä¸ªäººä¸»é¡µé“¾æ¥ï¼‰
- æ¸¸æˆIDè‡ªåŠ¨åŒ¹é…æœåŠ¡å™¨æˆå‘˜å¤´åƒ
- è½®æ’­å›¾æ”¯æŒåŠ¨æ€å¢åˆ ï¼ˆæœ€å¤š5å¼ ï¼‰
- ä½œå“ä»‹ç»æ”¯æŒæ¢è¡Œ
- ä¸‹è½½é“¾æ¥æ”¯æŒåŠ¨æ€å¢åˆ ï¼Œæ¯ä¸ªé“¾æ¥å¯è®¾ç½®ä»‹ç»
- æ ¹æ®é“¾æ¥ç±»å‹è‡ªåŠ¨è¯†åˆ«ä¸‹è½½åç§°
- è®¸å¯è¯é€‰æ‹©
- ä¸€é”®ç”Ÿæˆå¹¶ä¸‹è½½MDæ–‡ä»¶
- è‡ªåŠ¨ç”Ÿæˆç¬¦åˆè§„èŒƒçš„Frontmatter

## ç»„ä»¶å®ç°

åˆ›å»ºæ–‡ä»¶ `docs/.vitepress/theme/components/SubmissionForm.vue`ï¼š

```vue
<script setup lang="ts">
import { ref, computed } from 'vue'

const bvNumber = ref('')
const workName = ref('')
const resourceType = ref<'redstone' | 'building'>('redstone')
const authorName = ref('')
const gameId = ref('')
const authorLink = ref('')
const workDescription = ref('')
const license = ref('CC BY-NC-SA 4.0')

const images = ref<{ src: string; alt: string }[]>([{ src: '', alt: '' }])
const downloads = ref<{ url: string; description: string }[]>([{ url: '', description: '' }])

const addImage = () => {
  if (images.value.length < 5) {
    images.value.push({ src: '', alt: '' })
  }
}

const removeImage = (index: number) => {
  if (images.value.length > 1) {
    images.value.splice(index, 1)
  }
}

const addDownload = () => {
  downloads.value.push({ url: '', description: '' })
}

const removeDownload = (index: number) => {
  if (downloads.value.length > 1) {
    downloads.value.splice(index, 1)
  }
}

const avatarPath = computed(() => {
  if (gameId.value) {
    return `/mcoo/${gameId.value}.png`
  }
  return ''
})

const showAvatarPreview = computed(() => {
  return !!gameId.value
})

const handleAvatarError = (event: Event) => {
  const img = event.target as HTMLImageElement
  img.style.display = 'none'
}

const generateMarkdown = () => {
  const now = new Date()
  const dateStr = now.getFullYear() + '-' + 
    String(now.getMonth() + 1).padStart(2, '0') + '-' + 
    String(now.getDate()).padStart(2, '0') + ' ' + 
    String(now.getHours()).padStart(2, '0') + ':' + 
    String(now.getMinutes()).padStart(2, '0') + ':' + 
    String(now.getSeconds()).padStart(2, '0')
  const tag = resourceType.value === 'redstone' ? 'çº¢çŸ³' : 'å»ºç­‘'
  const cleanDesc = workDescription.value.replace(/\n/g, ' ').replace(/<br>/g, ' ').trim()
  const desc = cleanDesc.length > 150 
    ? cleanDesc.substring(0, 150) + '...' 
    : cleanDesc

  let md = '---\n'
  md += `title: ${workName.value}\n`
  md += `date: ${dateStr}\n`
  md += 'permalink: \n'
  md += 'categories:\n'
  md += '  - èµ„æº\n'
  md += 'tags:\n'
  md += `  - ${tag}\n`
  md += `description: ${desc}\n`
  md += 'author:\n'
  md += `  name: ${authorName.value}\n`
  md += `  link: ${authorLink.value}\n`
  md += '---\n\n'

  if (bvNumber.value) {
    md += `<BiliVideo bv="${bvNumber.value}" />\n\n`
  }

  const validImages = images.value.filter(img => img.src.trim())
  if (validImages.length > 0) {
    md += '<ImageGallery :images="[\n'
    validImages.forEach((img, index) => {
      md += `  { src: '${img.src}', alt: '${img.alt || `å›¾ç‰‡${index + 1}`}' },\n`
    })
    md += ']" />\n\n'
  }

  md += `<AuthorCard \n`
  md += `  avatar="${avatarPath.value}" \n`
  md += `  name="${authorName.value}" \n`
  md += `  link="${authorLink.value}" \n`
  md += `  subtitle="${gameId.value}"\n`
  md += `  license="${license.value}" \n`
  md += '>\n'
  md += '  <template #description>\n'
  const descLines = workDescription.value.split('\n')
  descLines.forEach(line => {
    if (line.trim()) {
      md += `    ${line.trim()}<br>\n`
    } else {
      md += '    <br>\n'
    }
  })
  md += '  </template>\n'
  md += '</AuthorCard>\n\n'

  md += '## ä½œå“ä¸‹è½½\n\n'
  md += '<DownloadCard :downloads="[\n'
  const validDownloads = downloads.value.filter(d => d.url.trim())
  validDownloads.forEach(download => {
    const name = getDownloadName(download.url)
    md += `  { name: '${name}', url: '${download.url}', description: '${download.description}' },\n`
  })
  md += ']" />\n'

  return md
}

const getDownloadName = (url: string) => {
  if (url.includes('github.com') && !url.includes('gh-proxy')) {
    return 'Github'
  } else if (url.includes('gh-proxy')) {
    return 'Github åŠ é€Ÿ'
  } else if (url.includes('gitee.com')) {
    return 'Gitee'
  } else if (url.includes('pan.baidu.com') || url.includes('baidu.com')) {
    return 'ç™¾åº¦ç½‘ç›˜'
  } else if (url.includes('qm.qq.com') || url.includes('qq.com')) {
    return 'Mcoo å¤§å‹å’•å’•é›†æ•£ä¸­å¿ƒ'
  } else if (url.includes('bilibili.com') || url.includes('b23.tv')) {
    return 'Bç«™è§†é¢‘'
  }
  return 'ä¸‹è½½é“¾æ¥'
}

const downloadMd = () => {
  const markdown = generateMarkdown()
  const blob = new Blob([markdown], { type: 'text/markdown' })
  const url = URL.createObjectURL(blob)
  const a = document.createElement('a')
  a.href = url
  a.download = `${workName.value || 'ä½œå“'}.md`
  document.body.appendChild(a)
  a.click()
  document.body.removeChild(a)
  URL.revokeObjectURL(url)
}

const isValid = computed(() => {
  const hasValidImages = images.value.some(img => img.src.trim())
  const hasValidDownloads = downloads.value.some(d => d.url.trim())
  
  return workName.value.trim() &&
         authorName.value.trim() && 
         gameId.value.trim() && 
         authorLink.value.trim() && 
         workDescription.value.trim() &&
         hasValidImages &&
         hasValidDownloads
})
</script>

<template>
  <div class="submission-form">
    <div class="form-section">
      <h3>ä½œå“ä¿¡æ¯</h3>
      <div class="form-group">
        <label>ä½œå“å <span class="required">*</span></label>
        <input v-model="workName" type="text" placeholder="è¾“å…¥ä½œå“åç§°" class="form-input" />
      </div>
      <div class="form-group">
        <label>èµ„æºç±»å‹ <span class="required">*</span></label>
        <select v-model="resourceType" class="form-input">
          <option value="redstone">çº¢çŸ³</option>
          <option value="building">å»ºç­‘</option>
        </select>
      </div>
    </div>

    <div class="form-section">
      <h3>Bç«™è§†é¢‘ï¼ˆå¯é€‰ï¼‰</h3>
      <input v-model="bvNumber" type="text" placeholder="è¾“å…¥BVå·" class="form-input" />
    </div>

    <div class="form-section">
      <h3>ä½œè€…ä¿¡æ¯</h3>
      <div class="form-group">
        <label>ä½œè€…å <span class="required">*</span></label>
        <input v-model="authorName" type="text" placeholder="è¾“å…¥ä½œè€…åç§°" class="form-input" />
      </div>
      <div class="form-group">
        <label>æ¸¸æˆID <span class="required">*</span></label>
        <input v-model="gameId" type="text" placeholder="è¾“å…¥æ¸¸æˆIDï¼Œç”¨äºåŒ¹é…å¤´åƒ" class="form-input" />
        <p v-if="showAvatarPreview" class="avatar-preview">
          å¤´åƒé¢„è§ˆï¼š<img :src="avatarPath" alt="å¤´åƒé¢„è§ˆ" @error="handleAvatarError" />
        </p>
      </div>
      <div class="form-group">
        <label>ä½œè€…ä¸ªäººä¸»é¡µé“¾æ¥ <span class="required">*</span></label>
        <input v-model="authorLink" type="url" placeholder="è¾“å…¥ä½œè€…ä¸ªäººä¸»é¡µé“¾æ¥" class="form-input" />
      </div>
      <div class="form-group">
        <label>è®¸å¯è¯ <span class="required">*</span></label>
        <select v-model="license" class="form-input">
          <option value="CC BY-NC-SA 4.0">CC BY-NC-SA 4.0</option>
          <option value="CC BY-SA 4.0">CC BY-SA 4.0</option>
          <option value="MIT">MIT</option>
        </select>
      </div>
    </div>

    <div class="form-section">
      <h3>è½®æ’­å›¾ <span class="required">*</span>ï¼ˆæœ€å¤š5å¼ ï¼‰</h3>
      <div v-for="(img, index) in images" :key="index" class="image-input-group">
        <input v-model="img.src" type="url" placeholder="å›¾ç‰‡é“¾æ¥" class="form-input" />
        <input v-model="img.alt" type="text" placeholder="å›¾ç‰‡åç§°ï¼ˆå¯é€‰ï¼‰" class="form-input" />
        <button v-if="images.length > 1" @click="removeImage(index)" class="btn-remove" type="button">Ã—</button>
      </div>
      <button v-if="images.length < 5" @click="addImage" class="btn-add" type="button">+ æ·»åŠ å›¾ç‰‡</button>
    </div>

    <div class="form-section">
      <h3>ä½œå“ä»‹ç» <span class="required">*</span></h3>
      <textarea v-model="workDescription" placeholder="è¾“å…¥ä½œå“ä»‹ç»ï¼Œæ”¯æŒæ¢è¡Œ" class="form-textarea" rows="6"></textarea>
    </div>

    <div class="form-section">
      <h3>ä¸‹è½½é“¾æ¥ <span class="required">*</span></h3>
      <div v-for="(download, index) in downloads" :key="index" class="download-input-group">
        <input v-model="download.url" type="url" placeholder="ä¸‹è½½é“¾æ¥" class="form-input" />
        <input v-model="download.description" type="text" placeholder="é“¾æ¥æè¿°" class="form-input" />
        <button v-if="downloads.length > 1" @click="removeDownload(index)" class="btn-remove" type="button">Ã—</button>
      </div>
      <button @click="addDownload" class="btn-add" type="button">+ æ·»åŠ ä¸‹è½½é“¾æ¥</button>
    </div>

    <div class="form-actions">
      <button @click="downloadMd" class="btn-download" :disabled="!isValid" type="button">ğŸ“¥ ä¸‹è½½ MD æ–‡ä»¶</button>
      <p v-if="!isValid" class="hint">è¯·å¡«å†™æ‰€æœ‰å¿…å¡«é¡¹åæ‰èƒ½ä¸‹è½½</p>
    </div>
  </div>
</template>

<style scoped lang="scss">
.submission-form {
  max-width: 800px;
  margin: 0 auto;
  padding: 24px;
  background: var(--vp-c-bg-soft);
  border-radius: 12px;
}

.form-section {
  margin-bottom: 24px;
  h3 { font-size: 1.1rem; font-weight: 600; margin-bottom: 12px; }
}

.form-group {
  margin-bottom: 16px;
  label { display: block; margin-bottom: 6px; font-size: 0.95rem; }
  .required { color: #e74c3c; }
}

.form-input, .form-textarea {
  width: 100%;
  padding: 10px 14px;
  font-size: 0.95rem;
  border: 1px solid var(--vp-c-divider);
  border-radius: 8px;
  background: var(--vp-c-bg);
  color: var(--vp-c-text-1);
  &:focus { outline: none; border-color: var(--vp-c-brand); }
}

.image-input-group, .download-input-group {
  display: flex; gap: 10px; margin-bottom: 10px;
  .form-input { flex: 1; }
}

.btn-add {
  padding: 8px 16px; font-size: 0.9rem;
  color: var(--vp-c-brand); background: transparent;
  border: 1px dashed var(--vp-c-brand); border-radius: 8px; cursor: pointer;
}

.btn-remove {
  padding: 8px 14px; font-size: 1rem;
  color: #e74c3c; background: transparent;
  border: 1px solid #e74c3c; border-radius: 8px; cursor: pointer;
}

.avatar-preview {
  margin-top: 8px; font-size: 0.9rem;
  img { width: 48px; height: 48px; border-radius: 50%; vertical-align: middle; margin-left: 8px; }
}

.btn-download {
  padding: 12px 32px; font-size: 1rem; font-weight: 600;
  color: #fff; background: var(--vp-c-brand);
  border: none; border-radius: 8px; cursor: pointer;
  &:disabled { opacity: 0.5; cursor: not-allowed; }
}
</style>
```

## ç»„ä»¶æ³¨å†Œ

åœ¨ `docs/.vitepress/theme/index.ts` ä¸­æ³¨å†Œç»„ä»¶ï¼š

```ts
import SubmissionForm from "./components/SubmissionForm.vue";

export default {
  enhanceApp({ app }) {
    app.component('SubmissionForm', SubmissionForm);
  },
}
```

## é¡µé¢ä½¿ç”¨

åˆ›å»º `docs/@pages/è‡ªåŠ©æŠ•ç¨¿.md`ï¼š

```md
---
title: è‡ªåŠ©æŠ•ç¨¿
permalink: /submission
---

<SubmissionForm />
```

## å…³é”®å®ç°ç‚¹

### 1. åŠ¨æ€å¢åˆ å›¾ç‰‡å’Œä¸‹è½½é“¾æ¥

ä½¿ç”¨æ•°ç»„å’ŒåŠ¨æ€æ·»åŠ /åˆ é™¤å‡½æ•°å®ç°ï¼š

```ts
const images = ref<{ src: string; alt: string }[]>([{ src: '', alt: '' }])

const addImage = () => {
  if (images.value.length < 5) {
    images.value.push({ src: '', alt: '' })
  }
}

const removeImage = (index: number) => {
  if (images.value.length > 1) {
    images.value.splice(index, 1)
  }
}
```

### 2. æ¸¸æˆIDè‡ªåŠ¨åŒ¹é…å¤´åƒ

ä½¿ç”¨ computed å±æ€§æ ¹æ®æ¸¸æˆIDåŠ¨æ€è®¡ç®—å¤´åƒè·¯å¾„ï¼š

```ts
const avatarPath = computed(() => {
  if (gameId.value) {
    return `/mcoo/${gameId.value}.png`
  }
  return ''
})

const showAvatarPreview = computed(() => {
  return !!gameId.value
})
```

**æ³¨æ„**ï¼šè¿™é‡Œéœ€è¦ä½¿ç”¨ computed å±æ€§æ¥åŒ…è£…æ¡ä»¶åˆ¤æ–­ï¼Œç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ `v-if="gameId"` å¯èƒ½ä¸ä¼šæ­£ç¡®è§¦å‘å“åº”å¼æ›´æ–°ã€‚

### 3. å¤´åƒåŠ è½½é”™è¯¯å¤„ç†

å½“å¤´åƒæ–‡ä»¶ä¸å­˜åœ¨æ—¶éšè—å›¾ç‰‡ï¼š

```ts
const handleAvatarError = (event: Event) => {
  const img = event.target as HTMLImageElement
  img.style.display = 'none'
}
```

### 4. ä¸‹è½½é“¾æ¥è‡ªåŠ¨è¯†åˆ«åç§°

æ ¹æ®é“¾æ¥ç±»å‹è‡ªåŠ¨è¯†åˆ«å¹¶ç”Ÿæˆä¸‹è½½åç§°ï¼š

```ts
const getDownloadName = (url: string) => {
  if (url.includes('github.com') && !url.includes('gh-proxy')) {
    return 'Github'
  } else if (url.includes('gh-proxy')) {
    return 'Github åŠ é€Ÿ'
  } else if (url.includes('pan.baidu.com') || url.includes('baidu.com')) {
    return 'ç™¾åº¦ç½‘ç›˜'
  } else if (url.includes('qm.qq.com') || url.includes('qq.com')) {
    return 'Mcoo å¤§å‹å’•å’•é›†æ•£ä¸­å¿ƒ'
  }
  return 'ä¸‹è½½é“¾æ¥'
}
```

### 5. ç”Ÿæˆå¸¦æ¢è¡Œçš„Description

ä½œå“ä»‹ç»éœ€è¦æ”¯æŒæ¢è¡Œï¼Œåœ¨ç”ŸæˆMDæ—¶è½¬æ¢ä¸º `<br>` æ ‡ç­¾ï¼š

```ts
const descLines = workDescription.value.split('\n')
descLines.forEach(line => {
  if (line.trim()) {
    md += `    ${line.trim()}<br>\n`
  } else {
    md += '    <br>\n'
  }
})
```

### 6. Descriptionè‡ªåŠ¨å¤„ç†

å°†æ¢è¡Œç¬¦æ›¿æ¢ä¸ºç©ºæ ¼ï¼Œå¹¶æˆªå–å‰150å­—ï¼š

```ts
const cleanDesc = workDescription.value.replace(/\n/g, ' ').replace(/<br>/g, ' ').trim()
const desc = cleanDesc.length > 150 
  ? cleanDesc.substring(0, 150) + '...' 
  : cleanDesc
```

### 7. æœ¬åœ°æ—¶é—´ç”Ÿæˆ

ä½¿ç”¨æœ¬åœ°æ—¶é—´è€ŒéUTCæ—¶é—´ï¼š

```ts
const dateStr = now.getFullYear() + '-' + 
  String(now.getMonth() + 1).padStart(2, '0') + '-' + 
  String(now.getDate()).padStart(2, '0') + ' ' + 
  String(now.getHours()).padStart(2, '0') + ':' + 
  String(now.getMinutes()).padStart(2, '0') + ':' + 
  String(now.getSeconds()).padStart(2, '0')
```

### 8. è¡¨å•éªŒè¯

ä½¿ç”¨ computed å±æ€§è¿›è¡Œè¡¨å•éªŒè¯ï¼š

```ts
const isValid = computed(() => {
  const hasValidImages = images.value.some(img => img.src.trim())
  const hasValidDownloads = downloads.value.some(d => d.url.trim())
  
  return workName.value.trim() &&
         authorName.value.trim() && 
         gameId.value.trim() && 
         authorLink.value.trim() && 
         workDescription.value.trim() &&
         hasValidImages &&
         hasValidDownloads
})
```

## å‚æ•°è¯´æ˜

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| bvNumber | string | å¦ | Bç«™è§†é¢‘BVå· |
| workName | string | æ˜¯ | ä½œå“åç§° |
| resourceType | string | æ˜¯ | èµ„æºç±»å‹ï¼ˆredstone/buildingï¼‰ |
| authorName | string | æ˜¯ | ä½œè€…åç§° |
| gameId | string | æ˜¯ | æ¸¸æˆIDï¼Œç”¨äºåŒ¹é…å¤´åƒ |
| authorLink | string | æ˜¯ | ä½œè€…ä¸ªäººä¸»é¡µé“¾æ¥ |
| workDescription | string | æ˜¯ | ä½œå“ä»‹ç» |
| license | string | æ˜¯ | è®¸å¯è¯ç±»å‹ |
| images | array | æ˜¯ | è½®æ’­å›¾æ•°ç»„ï¼Œæœ€å¤š5ä¸ª |
| downloads | array | æ˜¯ | ä¸‹è½½é“¾æ¥æ•°ç»„ |
