---
title: 绿联NAS部署CloudImgs图床
date: 2026-02-22
permalink: /imagehub/001
categories:
  - 部署教程
tags:
  - NAS
  - 图床
  - Docker
description: 详细介绍如何在绿联NAS上通过Docker部署CloudImgs私人图床。CloudImgs是一款简洁强大的自建图床程序，支持图片上传、管理和分享。通过绿联NAS的Docker容器化部署，可以轻松搭建私人图床服务，支持密码保护、批量上传、API接口等功能。配合PicGo/PicList客户端，还可实现截图即传、粘贴即用的便捷体验。
author:
  name: 我就是双灵
  link: https://space.bilibili.com/1323019347
---

## 准备工作

### 1. 安装 Docker

在绿联NAS系统中，进入 **应用中心** → 搜索 **Docker** → 安装

### 2. 创建存储文件夹

在NAS的文件管理器中：
1. 进入 Docker 文件夹
2. 新建 `cloudimgs` 文件夹
3. 在 `cloudimgs` 文件夹内再新建 `uploads` 文件夹（用于存放上传的图片）

```
Docker/
└── cloudimgs/
    └── uploads/      # 上传的图片会存这里
```

## 部署步骤

### 步骤 1：拉取镜像

1. 打开 **Docker** 应用
2. 点击左侧 **镜像** → **添加镜像**
3. 镜像名称填写：`qazzxxx/cloudimgs:latest`
4. 点击 **拉取**

等待拉取完成（可能需要几分钟，取决于网络速度）。

### 步骤 2：创建容器

1. 镜像拉取完成后，点击 **创建容器**
2. 基本设置：
   - 容器名称：`cloudimgs`
   - 勾选 ✅ **开机自启**
3. 端口设置：
   - 本地端口：`3001`（也可以改成其他端口如8080）
   - 容器端口：`3001`
   - 协议：TCP
4. 卷（存储）设置：
   - 添加文件夹：选择 `/docker/cloudimgs/uploads`
   - 装载路径：`/app/uploads`
5. 环境变量：
   | 变量名 | 变量值 | 说明 |
   |--------|--------|------|
   | PUID | 1000 | 用户ID |
   | PGID | 1000 | 用户组ID |
   | UMASK | 002 | 权限掩码 |
   | NODE_ENV | production | 运行模式 |
   | PORT | 3001 | 端口 |
   | STORAGE_PATH | /app/uploads | 存储路径 |

### 步骤 3：（可选）设置密码保护

如果需要密码保护，在环境变量中添加：
| 变量名 | 变量值 |
|--------|--------|
| PASSWORD | 你的密码 |

6. 点击 **创建**

### 步骤 4：启动容器

容器创建完成后会自动启动，也可以在容器列表中手动启动。

## 验证部署

### 查看运行状态

1. 打开 **Docker** 应用
2. 点击左侧 **容器**
3. 找到 `cloudimgs` 容器，状态显示为 **运行中** 即为成功

### 查看日志

点击容器名称 → **日志**，看到以下信息说明成功：
```
Initializing database...
Server running on port 3001
Starting file system sync...
Sync completed.
```

## 访问图床

打开浏览器访问：`http://你的NAS IP:3001`

- 如果设置了密码，会先提示输入密码
- 如果没有设置密码，直接进入图床界面

## 使用说明

### 上传图片

1. 点击 **上传** 按钮或直接拖拽图片到页面
2. 上传完成后，点击图片可复制链接
3. 支持批量上传

### 获取图片链接

- 点击图片会自动复制 Markdown 格式链接
- 也可在图片详情页获取 URL 链接

### 配置反向代理（可选）

如果想要通过域名直接访问，需要在NAS的反向代理中配置：
- 外部域名：`img.yourdomain.com`
- 内部地址：`http://localhost:3001`

## 常见问题

### Q: 访问不了图床？
A: 检查以下几点：
1. 容器是否正在运行
2. 端口是否正确（3001）
3. 绿联NAS防火墙是否开放了3001端口

### Q: 上传的图片在哪里？
A: 图片存储在 NAS 的 `/docker/cloudimgs/uploads` 文件夹中

### Q: 如何升级图床？
A:
1. 停止当前容器
2. 删除容器（不要删除卷/数据）
3. 重新拉取最新镜像
4. 重新创建容器（使用相同的卷挂载）

### Q: 如何备份图片？
A: 只需备份 `/docker/cloudimgs/uploads` 文件夹即可

### Q: 密码忘记了怎么办？
A: 停止容器，编辑环境变量中的 PASSWORD 值，重启容器即可

## 配合 PicGo 上传图片（可选）

如果你不想每次打开浏览器上传图片，可以使用 PicGo/PicList 客户端在本地直接上传。

### 什么是 PicGo/PicList？

- **图床（NAS）**：存放图片的地方
- **PicGo/PicList（本地）**：上传工具，装在你日常使用的电脑上

```
你的电脑（PicGo/PicList） → 上传 → NAS图床（CloudImgs）
```

### 安装 PicList（推荐）

PicList 是 PicGo 的增强版，功能更强大。

1. 下载安装 [PicList](https://github.com/Kuingsmile/PicList)

### 安装 cloudimgs-uploader 插件

1. 打开 PicList → 点击左侧 **插件设置**
2. 在搜索框输入 `cloudimgs-uploader`
3. 点击 **安装**

### 配置插件

安装完成后，在插件列表中找到 `cloudimgs-uploader`，点击 **设置**，配置如下：

| 参数 | 说明 | 示例 |
|------|------|------|
| 服务器域名 | 你的图床地址（不要加后面的接口路径） | `http://192.168.1.100:3001`此为示例链接 |
| 密码 | 你设置的访问密码 | `你的密码` |
| 存储路径 | 图片存放文件夹（可选） | `my_folder` |

### 使用方法

1. 在 PicList 左侧找到 **上传区**，选择 **云图（cloudimgs）** 作为默认图床
2. 截图后按 `Ctrl+V` 粘贴，或拖拽图片到窗口
3. 图片会自动上传到NAS图床，并自动复制Markdown链接
4. 直接在文档中 `Ctrl+V` 粘贴即可

### 配合编辑器使用

- **Typora**：设置 → 图像 → 插入图片时 → 上传图片 → 验证PicGo-Core
- **VSCode**：安装 PicGo 插件，配置同样的图床

这样截图或粘贴图片时，会自动上传到你的NAS图床，非常方便！
